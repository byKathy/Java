#05. web安全规范

##1. 密码
  * 密码最少为8位的字母、数字和符号混用。字母、数字、符号缺一不可；
  * 使用登陆验证码，防止暴力破解；
  * 密码应该在后台进行MD5加密；
  * 管理员账号应该限制登录IP；

##2. 前端和后台数据校验
  * 前端和后台的数据校验都是必须的；
  * 为了简化，尽量使用现成的第三方校验框架‘

##3. 上传目录
  * 限制文件上传的文件类型，应该建立文件类型白名单，而不是黑名单；
  * 文本类型的文件，例如.jsp、.php等脚本类型的脚本文件的非常危险的，一定不允许上传此类<a href="http://baike.baidu.com/view/53110.htm" title="什么是web shell">web shell</a>文件；
  * 保存文件的目录，不能具有执行脚本的权限；
  * 保存文件的目录，最好不好放在Web目录之下，即使在web目录必须禁止只想脚本的能力，例如spring mvc的resources目录；

##4. 跨站点脚本攻击（xss）
  跨站点脚本攻击（Cross Site Script），是指黑客通过HTML注入篡改HTML网页代码，以插入恶意的脚本
，来达到对用户浏览器进行的一种攻击。特别是当服务器对黑客输入的代码进行数据库存储后，这种情况的危害极大。（参考:<a href="http://baike.baidu.com/view/2161269.htm">http://baike.baidu.com/view/2161269.htm</a>）

  可以由多个方面去防止xss漏洞，这里只采用在输出时对特殊字符进行编码的方法。在输出时，统一使用c:out标签输出，而不使用EL语言表达式。在c:out标签中有一个属性<code>escapeXml=“{true|false}”</code>可以设置是否对特殊字符进行转码，默认为<code>true</code>。
  
```jsp
<c:out value="#{admin.username}"/> <!--推荐-->
${admin.username} <!--不推荐-->
```
##5. 跨站点请求伪造（csrf）
  CSRF（Cross-site request forgery 跨站点请求伪造）是一种对网站的恶意利用。尽管听起来跨站点脚本（XSS），但它与XSS非常不同，并且攻击方式几乎相左。XSS利用站点内的信任用户，而CSRF则通过伪装来自受信任用户的请求来利用受信任的网站。与XSS攻击相比，CSRF攻击往往不大流行（因此对其进行防范的资源也相当稀少）和难以防范，所以被认为比XSS更具危险性。（参考: <a href="http://baike.baidu.com/view/1609487.htm">http://baike.baidu.com/view/1609487.htm</a>）

  防止CSRF可以参考以下方法：
  * 当用户登录的时候，随机生成用户请求的验证码，每次用户进行请求的操作的时候都进行验证码的验证用来防止请求并非用户主动发起。验证码可以添加到用户的URL或Cookie中；
  *	验证请求的来源。每次用户请求的时候都需要验证此次请求是否来自于同域。如果是不同域名，则拒绝此次请求。用户的请求来源可以从HTTP请求头的Referer中取得。但是这种方法只对HTTP的请求有效而对HTTPS的请求无效；
  * HTTP表单中，当获取资源时使用GET方法，当增加或更新资源时使用POST方法，如果服务器支持PUT和DELETE，则使用POST增加资源、PUT更新资源、DELETE删除资源。对于GET和HEAD方法而言，除了进行获取资源信息外，这些请求不应当再有任何其他意义。也就是说，这些方法应当被认为是“安全的”。客户端应当使用其他“非安全”方法，例如POST，PUT及DELETE来以特殊的方式（通常是按钮而不是超链接）使得客户能够意识到可能要负的责任（例如一个按钮带来的资金交易）或者被告知正在请求的操作可能是不安全的（例如某个文件将被上传或删除）；
  * 为每一个非安全方法添加token，在使用标签的时候，生成token，一般是32位的MD5校验码。例如Spring MVC就可以使用RequestDataValueProcessor这个类结合form:form可以生成token。详见<a href="http://blog.eyallupu.com/2012/04/csrf-defense-in-spring-mvc-31.html">这里</a>。
  

##6. SQL注入

##7. Session固定攻击

##8. Spring Security dff
